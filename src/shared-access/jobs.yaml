job_specifications:
- id: elastic-serial-small
# Attached shared blob volume to job
  shared_data_volumes:
  - azureblob_vol
  tasks:
  - docker_image: mloubout/azure_elastic:v1.0
    environment_variables:
      OMP_NUM_THREADS: 16
      DEVITO_LOGGING: DEBUG
      OMP_PROC_BIND: 'TRUE'
    # Taask factory generates list of task. In this case 2 random integers between 0 and 50
    task_factory:
      random:
        generate: 2
        integer:
          start: 0
          step: 1
          stop: 50
    # RUn you program
    command: > 
      python $AZ_BATCH_NODE_SHARED_DIR/path/to/python/script
      --id {}
      --resultdir $AZ_BATCH_NODE_SHARED_DIR/path/to/result/dir
      --modeldir $AZ_BATCH_NODE_SHARED_DIRpath/to/models/dir